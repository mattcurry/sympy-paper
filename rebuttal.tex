\documentclass[answers,12pt]{exam}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{upquote}
\usepackage{textcomp}

\unframedsolutions
\shadedsolutions
\renewcommand{\solutiontitle}{}

\begin{document}

Dear Editors, \bigskip

Please read below our answer about the
questions made by you and reviewers. I hope that you agree
with all our comments. \bigskip

Best regards,\bigskip

The authors

\pagebreak

\section{Comments from Editor}

\begin{questions}
\question I found the \url{http://live.sympy.org/} site very convenient for trying things
out in SymPy, but it is only mentioned in the supplement, which might be
overlooked by readers. I suggest moving that section into the main paper, as
it provides a great way to play along with the examples while reading the
paper.
\begin{solution}
  % TODO
\end{solution}
\question The Basic Usage section omits what I think is an important point:
how does one distinguish between evaluating exp(1) in Python and exp(1) in
SymPy? In other words, how are symbolic constants specified?
\begin{solution}
  % TODO. I'm unclear what the editor is asking here.
\end{solution}
\question The first
thing I tried after seeing Table 2 (simplication functions) did not work:

\begin{verbatim}
>>> trigsimp (exp( Matrix(2, 2, [0, -y, y, 0])) )
\end{verbatim}
fails to recognize cos and
sin. Am I expecting too much?
\begin{solution}
  This indeed does not work. The implementation in \verb|trigsimp| primarily
  thus far has focused on transforming trigonometric functions into other
  trigonometric functions. The ability to simplify complex exponentials is
  something that we would like to work.
  \href{https://github.com/sympy/sympy/issues/11459}{Issue 11459} in our
  public issue tracker tracks this feature.
\end{solution}
\question Section 3.6: are eigenvalues and singular
values included? If not, why not?
\begin{solution}
  % TODO
\end{solution}
\question Like one of the referees, I expected to
see MPFR mentioned in Section 4.1, at least to mention the pros and cons and
say why it isnâ€™t used.
\begin{solution}
  % TODO
\end{solution}
\question Section 4.1: please state whether the syntax for
functions in mpmath is identical, or not, to that in Sympy.
\begin{solution}
  % TODO
\end{solution}
\question Unless I have
missed something, a weakness of the paper is that speed is mentioned only
twice, on lines 496 and 666. My assumption is that SymPy is slow compared with
its commercial competitors. Please comment on the speed issue, and not just in
the conclusions.
\begin{solution}
  % TODO
\end{solution}
\question Editors are needed for [20].
\begin{solution}
  % TODO: I do not know how to make bibtex (with apalike) show the editor
  % here.
\end{solution}
\end{questions}

\section{Reviewer 1 (James Davenport)}
\subsection{Basic reporting}
\begin{questions}
\question Generally good. A part that confused me is the assertion (footnote 3) that "If
A and B are Symbols created with commutative=False then SymPy will keep AÂ·B
and BÂ·A distinct." Does that mean that BOTH of them must be created this way,
and that A and x (if x is created normally) will commute? Is there any way to
declare commutators? How does one guarantee that other pieces of code, e.g.
Gaussian elimination, respect non-commutativity?
\begin{solution}
  We have clarified the footnote. Both expressions must be set as
  \texttt{commutative=False}. Internally, in \texttt{Mul}, the ``commutative
  part'' of an expression is pulled out to the front and canonically ordered,
  and the ``noncommutative part'' is not reordered.

Commutators are implemented in the \texttt{sympy.physics.quantum} module and
are discussed in section 5.2.

Different algorithms do generally require special consideration for
noncommutative expressions to be correct. If an algorithm implicitly assumes
that expressions commute, it may return incorrect results when given a
noncommutative expression.
\end{solution}

\question References reasonable, though [8], an excellent reference, makes almost
precisely the opposite point to that for which it is cited --- ``simplification
is not well-defined''. I think the authors are trying to follow [8]'s
definition of simplification.
\begin{solution}
  % TODO. I agree that [8] is a bad reference, because we are not actually
  % using their definition. The aim was just to have a reference for
  % "simplification is not well-defined", but that paper aims to define it.
  % What is a better reference here? Perhaps Moses [19] from the Carette
  % paper? Perhaps we can remove the reference (the referenced statement is
  % "it must be emphasized that simplification is not a rigorously defined
  % mathematical operation").
\end{solution}
\end{questions}

\subsection{Experimental design}
\begin{questions}
\question The referee is asked to comment whether the research is withinthe scope of the
journal, defined as "PeerJ is an Open Access, peer-reviewed, scholarly
journal. It considers articles in the Biological Sciences, Medical Sciences,
and Health Sciences. PeerJ does not publish in the Physical Sciences, the
Mathematical Sciences, the Social Sciences, or the Humanities (except where
articles in those areas have clear applicability to the core areas of
Biological, Medical or Health sciences)."

Hence I fear a software description on the maths/cmputing boundary with no
cited applications is out of scope.

\begin{solution}
  The editor has confirmed that the paper is in scope for PeerJ Computer Science.
\end{solution}
\end{questions}

\subsection{Validity of the findings}
\begin{questions}
\question There are no findings as such, since this is a software description, not an
experimental paper.
\end{questions}

\subsection{Comments for the author}
\begin{questions}
\question Nice paper - pity it seems totally out of scope. Why not J. Symbolic
Computation or some such?
\begin{solution}
  See above.
\end{solution}
\end{questions}

\section{Reviewer 2 (Michael Croucher)}

\subsection{Basic reporting}
No Comments.

\subsection{Experimental design}
No Comments

\subsection{Validity of the findings}
\begin{questions}
\question There is a minor problem with the supplementary notebook

The final cell is

\begin{verbatim}
>>> circuit_plot(fourier, nqubits=3);
plt.savefig('./images/circuitplot-qft.pdf', format='pdf')
\end{verbatim}

This fails if the user does not have an images folder.
\begin{solution}
We have added

\begin{verbatim}
%mkdir -p './images'
\end{verbatim}

to the cell before the call to \verb|savefig|.
\end{solution}

\question I suggest removing the \verb|>>>| before each line. It looks strange in a notebook.
\begin{solution}
We have done this.
\end{solution}
\end{questions}
\subsection{Comments for the author}
Sympy is a superb package and I am happy to see that there is now a paper that describes its current state. Here are a few comments that you may wish to consider before publication.

\begin{questions}
\question Line 105
It is generally frowned upon to import all symbols from a Python module in this manner.
I understand why you are doing it in this paper, it makes subsequent sympy commands less verbose.
It might, however, encourage bad practice. It may also lead to a poor user experience for newbies.

For example, say I had the following code

\begin{verbatim}
ð”¬mÎ½mpyimportsin,arraytest=array(123)sin(test)
\end{verbatim}
[sic]

I decide that I want to use sympy for something and, following your example, do

\begin{verbatim}
ð”¬mÎ½mpyimportsin,arrayð”¬msympyimportâ‹…test=array(123)sin(test)x,y,z=symbols(â€²xyzâ€²)
\end{verbatim}
[sic]

The code will break because sympy has it's own sin that gets imported that doesn't work on numpy arrays. As a newbie, I might not know this.
I tested using Sympy 1.0 and Python 3.

\begin{solution}
We have used \verb|import *| on purpose, as we felt that explicitly importing
names would unnecessarily distract from the content of the paper, but the
reviewer is absolutely right that this is bad practice for actual code. We
have added a footnote:

Later in the text, a similar assertion is made by you (line 485) in reference to a different package that may break sympy.

\begin{quote}\texttt{import *} has been used here to aid the
  readability of the paper, but is best to avoid such wildcard import
  statements in production code, as they make it unclear which names are
  present in the namespace. Furthermore, imported names could clash with
  already existing imports from another package. For example, SymPy, the
  standard Python \texttt{math} library, and NumPy all define the \texttt{exp}
  function, but only the SymPy one will work with SymPy symbolic expressions.
\end{quote}

We have also removed the reference to \texttt{from mpmath import *} from line 485.
\end{solution}

\question Lines 151-153
Minor comment: srepr is a useful command. As someone who also uses Mathematica, I wonder if there is a sympy version of the TreeForm command which produces a visualisation of the expression tree, or maybe an output format that I could pass to a graph library for visualisation?

\begin{solution}
We have added a footnote about the \texttt{dotprint} function (footnote 3),
which outputs expressions in the dot format that can be rendered with Graphviz.
\end{solution}

\question Section 2.3 - Assumptions
Is there a way of the user listing all available assumptions?

\begin{solution}
There is no simple way to access this in code (the simplest way is
\texttt{sys.\allowbreak{}modules[\allowbreak{}\textquotesingle{}sympy.core.assumptions\textquotesingle{}].\allowbreak{}\_assume\_defined}, which works
around some technical issues with Python's import system, and uses a
private method). The recommended list is in the SymPy documentation, at
\url{http://docs.sympy.org/latest/modules/core.html#module-sympy.core.assumptions}.
\end{solution}
\question Section 2.4
Line 216 - This is due in part because the same language, Python, is used both for the internal implementation and the external usage by users.

This reads badly. Perhaps the following might be better?

This is due, in part, to the fact that the same language, Python, is used both for the internal implementation and the external usage by users.

\begin{solution}
We have changed the sentence as suggested.
\end{solution}
\question Line 221:
the phrase 'Expression tree' is cited but this is not the first time you've used it. Perhaps cite earlier? Line 129 perhaps?

\begin{solution}
The footnote here was in reference to the SymPy classes. We have moved the
footnote earlier in the sentence, to ``SymPy classes''.
\end{solution}
\question Page 8: Footnote 5
The line reads

The measure parameter of the simplify function lets specify the Python function used to determine how

should this be..

The measure parameter of the simplify function lets the user specify the Python function used to determine how

\begin{solution}
We have changed the sentence as suggested.
\end{solution}
\question Section 4.1
Should mpmath be cited here?

\begin{solution}
We have added a citation for mpmath.
\end{solution}
\end{questions}

\section{Reviewer 3 (Vedran Sego)}

\begin{questions}

\question Explaining what Python is (lines 70â€“72) should go before talking about SymPy as a â€œCAS written in Pythonâ€. Further, the paper assumes a moderate familiarity with Python (for example, Pythonâ€™s console, OOP, and exceptions), and this should be specified. There should be a short note on the used Python console (>>> is the prompt, with the results of computation following immediately in the lines after it). The citation [25] from line 65 should be moved next to â€œPythonâ€ in line 70.
\begin{solution}

\end{solution}

\question Line 73 has outdated information. Sage was renamed to SageMath and it no longer aims only at pure mathematics but also at algebra, numerical analysis, etc. The reference [40] should be replaced by a more up-to-date one.
\begin{solution}

\end{solution}

\question The plural â€œCASsâ€ is usually written as â€œCASesâ€ or â€œCASâ€™sâ€, with the latter being somewhat problematic due to it looking like it implies posses- sion.
\begin{solution}

\end{solution}

\question Line 88 mentions â€œprintersâ€, but it doesnâ€™t state what they are, which is confusing for those readers that are yet to learn the concept in section 3.4.
\begin{solution}

\end{solution}

\question Also in line 88, Jupyterâ€™s citation [30] is actually about IPython and should be replaced by a more up-to-date version.
\begin{solution}

\end{solution}

\question The word â€œsoftwareâ€ in line 91 is ambiguous; â€œlibraryâ€ or â€œpackageâ€ would make a better choice.
\begin{solution}

\end{solution}

\question Lines 91â€“96: â€œwe discuss/look at/etcâ€ is the preferred form, instead of â€œsection discusses/looks at/etcâ€.
\begin{solution}

\end{solution}

\question The paragraph in lines 103â€“105 should be moved to the introduction, and the footnote from line 104 should be added to that paragraph as a full-blown sentence, expanded by all the relevant technical information (Python version, OS,...). Given that the end of life for Python 2 is 2020., a comment on whether all the presented examples work in both Python 2 and 3 should be included as well. Further, emphasise that wildcard imports, â€œimport *â€, should almost never be used in programs (see PEP 8, the item â€œwildcard importsâ€). The same goes for the import mentioned in lines 484â€“487.
\begin{solution}

\end{solution}

\question Line 119 should be removed, as it is basically a copy of the previous line.
\begin{solution}

\end{solution}

\question In line 121 the word â€œstoredâ€ should be replaced by â€œused as keysâ€.
\begin{solution}

\end{solution}

\question Whatdotheauthorsmeanbyâ€œtherebypermittingfeaturessuchascachingâ€ in line 122? Caching can be done for mutable types as well, just not through hashing. 2
\begin{solution}

\end{solution}

\question There is no need to repeat â€œ(CAS)â€ in line 124, as it was already given in line 64.
\begin{solution}

\end{solution}

\question In the same line, the word â€œrepresentsâ€ should be replaced by â€œstoresâ€.
\begin{solution}

\end{solution}

\question In line 184, â€œsymbols areâ€ should be replaced by â€œt isâ€ (the general rule is already given in line 179).
\begin{solution}

\end{solution}

\question The code in line 210 should be made into its own line (like a displaymath formula), for typesetting reasons and better readability.
\begin{solution}

\end{solution}

\question The footnote 4 should be moved from line 221 to line 222, right after â€œBasicâ€.
\begin{solution}

\end{solution}

\question The part â€œwhich defines some basic methods for symbolic expression treesâ€ should be removed from line 222, as it was already given in line 130.
\begin{solution}

\end{solution}

\question In line 225, the sentence â€œNot all SymPy classes are subclasses of Expr.â€ sounds confusing as a reader new to SymPy wouldnâ€™t expect, for example, symbols to inherit â€œExprâ€. It would be better to expand this, for example â€œMost of the SymPy classes (including Symbol) are subclasses of Expr, but there are exceptions to this ruleâ€.
\begin{solution}

\end{solution}

\question The title â€œFeaturesâ€ in line 276 is ambiguous, as a â€œfeatureâ€ has no precise meaning in Python (or even software libraries in general). It should be replaced by â€œPackages and modulesâ€ or a similar more precise wording. The same goes for â€˜featureâ€ in most other places in the paper (for exam- ple, the caption of Table 1. and line 495). It would be very useful to also include actual names of the packages/modules in Table 1., as well as in any section covering those packages/modules.
\begin{solution}

\end{solution}

\question The sets support listing is unnaturally split in two by the â€œThis includes...â€ sentence which would fit better in parentheses.
\begin{solution}

\end{solution}

\question Line 355, add a sentence explaining that in SymPy str == repr, because in Python repr is used to get an unambiguous valid Python code repre- sentation, while the return value of str is meant to be human-readable.
\begin{solution}

\end{solution}

\question Lines 359 and 379: what is 2D text representation? It seems that â€œ2Dâ€ shouldnâ€™t be here.
\begin{solution}

\end{solution}

\question Line 427: every dictionary is a â€œdictionary of keysâ€. This should be a dictionary with coordinate tuples as keys associated with the appropriate values.
\begin{solution}

\end{solution}

\question Section 4 would benefit from an introduction, and lines 440â€“ should be- come a new subsection 4.1. (named â€œFloatâ€ or â€œReal numbers supportâ€ or similar).
\begin{solution}

\end{solution}

\question I suggest a better example for lines 459â€“460: a computation of (e100 +1)âˆ’ e100 :
\begin{solution}

\end{solution}
   >>> (exp(100)+1).evalf() - exp(100).evalf()
   0
   >>> ((exp(100)+1) - exp(100)).evalf()
   1.00000000000000
   >>> (exp(100)+1) - exp(100)
   1
or two different ways to compute the 100th Fibonacci number:
   >>> phi = (1+sqrt(5))/2
   >>> psi = (1-sqrt(5))/2
   >>> ((phi**100-psi**100)/sqrt(5)).evalf()-fibonacci(100)
   65536.0000000000
   >>> ((phi**100-psi**100)/sqrt(5) - fibonacci(100)).evalf()
   0.e-104
Obviously, like your own example, these are problematic because a part of the computation is relying on Pythonâ€™s builtin floats. Please include a comment on whether symbolic computation (i.e., applying evalf() on the whole expression) always avoids these errors or not, possibly with an example when it doesnâ€™t resolve this problem.

\question The footnote from line 477 should be moved as a sentence in its own right to the introduction, with other technical specifications.
\begin{solution}

\end{solution}

\question In line 495, the word â€œsolvingâ€ seems more appropriate than â€œsolutionsâ€.
\begin{solution}

\end{solution}

\question In line 504 â€œisâ€ should be used instead of â€œareâ€ (because â€œarrayâ€ is singular).
\begin{solution}

\end{solution}

\question In line 518, â€œproducesâ€ should become plural.
\begin{solution}

\end{solution}

\question The title of section 5, â€œDomain specific submodulesâ€, seems inappropriate because the section only covers Physics package (not â€œsubmodulesâ€). It should either be expanded with a short introduction listing other domain specific packages, or it should be renamed to â€œPhysics packageâ€.
\begin{solution}

\end{solution}

\question The word â€œsymbolicsâ€ in line 528 should be removed (as almost everything in the paper deals with symbolic computation).
\begin{solution}

\end{solution}

\question In line 530, sympy.physics.vector is a module, not a package.
\begin{solution}

\end{solution}

\question It is unclear what â€œboth of these objectsâ€ refer to in line 532. My guess is vectors and dyadic objects, but this should be reworded to make it more clear.
\begin{solution}

\end{solution}

\question In lines 543 and 545, â€œradâ€ should be removed. Radians are assumed when no other measure (like degrees) is given.
\begin{solution}

\end{solution}

\question In lines 567â€“568, â€œperforming symbolic quantum mechanicsâ€ makes no sense. This should probably be â€œcomputationsâ€, â€œsolving problems related toâ€, etc.
\begin{solution}

\end{solution}

\question The sentence â€œSymPy expressions are immutable trees of Python objects.â€ doesnâ€™t belong in the conclusion. This can be moved to the appropriate place when discussing SymPyâ€™s architecture.
\begin{solution}

\end{solution}

\question All â€œsubmodulesâ€ should be replaced by â€œmodulesâ€ (examples: lines 657, 662).
\begin{solution}

\end{solution}

\question The sentences in lines 657â€“661 should swap places, because â€œareas of mathematicsâ€ are discrete mathematics, concrete mathematics, etc., while simplifying expressions, performing common calculus operations, pretty print- ing expressions, etc. belongs to common operations (â€œother areasâ€ is also fine, albeit slightly wrong).
\begin{solution}

\end{solution}

\question In line 662 â€œclassical mechanics and quantum mechanicsâ€ are listed as the only example of the support for specific domains, as in section 5, which leaves the impression that physics the only one. Either more domains should be listed, or it should be reworded to recognize the fact that there are no others.
\begin{solution}

\end{solution}

\question Lines 670â€“678 contain explanations what some of the authorsâ€™ institu- tions are. It is customary to use acknowledgements to thank people and institutions, while institutionsâ€™ details should be provided in the authorsâ€™ footnotes in the documentsâ€™ head.
\begin{solution}

\end{solution}

\question The citation [5] in line 691 is missing identification data, probably a URL.
\begin{solution}

\end{solution}

\question The citation [21] in line 728 should have â€œ2Dâ€ instead of â€œ2dâ€. More specific comments and correction suggestions for the supplement fol- low.
\begin{solution}

\end{solution}

\question The supplement should have an introduction, explaining what is being covered in it in general and in each section.
\begin{solution}

\end{solution}

\question Since the Guntz algorithm is covered in depth, it would be good to
include how an interested reader can see SymPyâ€™s steps of computation:

\begin{verbatim}
     >>> import os
     >>> os.environ['SYMPY_DEBUG'] = 'True'
     >>> from sympy import *
     >>> x = symbols(â€™xâ€™)
     >>> limit(sin(x)/x, x, 0)
     DEBUG: parsing of expression [(0, 1, None, None)] with symbol _w
     DEBUG: returned None
     DEBUG: parsing of expression [(_w, 1, None, None)] with symbol _w
     DEBUG: returned ([], [(_w, 1, None, None)], 1, False)
     DEBUG: parsing of expression [(0, 1, None, None)] with symbol _w
     DEBUG: returned None
     DEBUG: parsing of expression [(_w, 1, None, None)] with symbol _w
     DEBUG: returned ([], [(_w, 1, None, None)], 1, False)
     DEBUG: parsing of expression [(_w, 1, None, None)] with symbol _w
     DEBUG: returned ([], [(_w, 1, None, None)], 1, False)
     DEBUG: parsing of expression [(0, 1, None, None)] with symbol _w
     DEBUG: returned None
     DEBUG: parsing of expression [(_w, 1, None, None)] with symbol _w
     DEBUG: returned ([], [(_w, 1, None, None)], 1, False)
     DEBUG: parsing of expression [(0, 1, None, None)] with symbol _w
     DEBUG: returned None
     DEBUG: parsing of expression [(_w, 1, None, None)] with symbol _w
     DEBUG: returned ([], [(_w, 1, None, None)], 1, False)
     DEBUG: parsing of expression [(1, 1, None, None)] with symbol _w
     DEBUG: returned None
     limitinf(x*sin(1/x), x) = 1
     +-mrv_leadterm(_p*sin(1/_p), _p) = (1, 0)
     | +-mrv(_p*sin(1/_p), _p) = ({_p: _Dummy_14}, {}, _Dummy_14*sin(1/_Dummy_14))
     | | +-mrv(_p, _p) = ({_p: _Dummy_14}, {}, _Dummy_14)
     | | +-mrv(sin(1/_p), _p) = ({_p: _Dummy_15}, {}, sin(1/_Dummy_15))
     | |   +-mrv(1/_p, _p) = ({_p: _Dummy_15}, {}, 1/_Dummy_15)
     | |     +-mrv(_p, _p) = ({_p: _Dummy_15}, {}, _Dummy_15)
     | +-rewrite(_Dummy_14*sin(1/_Dummy_14), {exp(_p): _Dummy_14}, {}, _p, _w)
             = (sin(_w)/_w, -_p)
     | | +-sign(_p, _p) = 1
     | | +-limitinf(1, _p) = 1
     | +-calculate_series(sin(_w)/_w, _w) = 1
     |   +-limitinf(_w, _w) = oo
     |   | +-mrv_leadterm(_w, _w) = (1, -1)
     |   | | +-mrv(_w, _w) = ({_w: _Dummy_18}, {}, _Dummy_18)
     |   | | +-rewrite(_Dummy_18, {exp(_w): _Dummy_18}, {}, _w, _w) = (1/_w, -_w)
| |||+-sign(_w,_w)=1
     |   | | | +-limitinf(1, _w) = 1
     |   | | +-calculate_series(1/_w, _w) = 1/_w
     |   | +-sign(-1, _w) = -1
     |   | +-sign(1, _w) = 1
     |   +-limitinf(_w, _w) = oo
     |   +-limitinf(_w, _w) = oo
     |   +-limitinf(_w, _w) = oo
     +-sign(0, _p) = 0
     +-limitinf(1, _p) = 1
\end{verbatim}

Emphasize that the environment variable \texttt{SYMPY\_DEBUG} must be set before importing SymPy for the first time.
\begin{solution}

\end{solution}

\question In line 183, syntax symbols(a:d) is used without being previously defined or explained.
\begin{solution}

\end{solution}

\question Figure 2 should not be a screenshot, but rather proper code with LATEX-
w rendered results and explanations, as was done in the rest of the paper. A
 shortened link to SymPy Gamma for the exampleâ€™s expression can be included
 for the user to try this for themselves.
\begin{solution}

\end{solution}

\end{questions}


\end{document}
